<!DOCTYPE html>
<html th:replace="~{main :: main(~{::title}, ~{}, ~{::ol}, ~{::section}, ~{::script})}" xmlns:th="http://thymeleaf.com">
<head>
	<title>Wishlist</title>
</head>
<body>
<ol>
	<li class="breadcrumb-item"><a class="breadcrumb-link" th:href="@{/home}">Home</a></li>
	<li class="breadcrumb-item"><a class="breadcrumb-link active" aria-current="page" th:href="@{/wishlist}">Wishlist</a></li>
</ol>
<section class="container space-1">
	
	<div class="card">
		<div class="card-body">
			<div class="table-responsive-md u-datatable">
				<table id="wish-table" class="table table-borderless u-datatable__striped u-datatable__content mb-5">
					<thead>
						<tr class="text-uppercase font-size-1">
							<th scope="col" class="font-weight-medium">
								<div class="d-flex justify-content-between align-items-center">
									Description
								</div>
							</th>
							<th scope="col" class="font-weight-medium">
								<div class="d-flex justify-content-between align-items-center">
									Price
								</div>
							</th>
							<th scope="col" class="font-weight-medium">
								<div class="d-flex justify-content-between align-items-center">
									Show Links
								</div>
							</th>
							<th scope="col" class="font-weight-medium">
								<div class="d-flex justify-content-between align-items-center"></div>
							</th>
						</tr>
					</thead>
					<tbody class="font-size-1">
						<tr th:each="wish : ${user.wishes}">
							<td class="align-middle font-weight-normal" th:text="${wish.description}"></td>
							<td class="align-middle" th:text="${wish.price != null ? wish.price.currency : 'N/A'}"></td>
							<td class="align-middle">
								<div class="media align-items-center">
									<label class="checkbox-switch">
										<input type="checkbox" class="checkbox-switch__input show-refs" th:attr="data-wish-id=${wish.id}">
										<span class="checkbox-switch__slider"></span>
									</label>
								</div>
							</td>
							<td class="align-middle">
								<div class="dropdown dropright">
									<button class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
										<i class="fas fa-ellipsis-v"></i>
									</button>
									<div class="dropdown-menu">
										<a class="dropdown-item wish-action-edit" th:attr="data-wish-id=${wish.id}" href="javascript:void(0);" data-toggle="modal" data-target="#edit-wish-modal">Edit</a>
										<div class="dropdown-divider"></div>
										<a class="dropdown-item text-danger wish-action-delete" th:attr="data-wish-id=${wish.id},data-wish-description=${wish.description}" href="javascript:void(0);" data-toggle="modal" data-target="#delete-wish-modal">Delete</a>
									</div>
								</div>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
		<div class="card-footer">
			<button type="button" class="btn btn-primary transition-3d-hover float-right" data-toggle="modal" data-target="#new-wish-modal"><i class="fas fa-plus small mr-2"></i> Add a wish</button>
		</div>
	</div>
	
	<!-- Edit wish modal -->
	<div class="modal fade" id="edit-wish-modal" tabindex="-1" role="dialog" aria-labelledby="edit-wish-modal-label" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">
				<form action="/wish/update" method="post">
					<div class="modal-header">
						<h5 class="modal-title" id="edit-wish-modal-label">Update wish</h5>
						<button type="button" class="close btn btn-round" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body">
						<div class="form-group">
							<label for="edit-wish-description">Description</label>
							<input id="edit-wish-description" class="form-control" type="text" placeholder="My two front teeth..." name="description" required />
							<input id="edit-wish-description-orig" type="hidden">
						</div>
						<div class="form-group">
							<label for="edit-wish-price">Price</label>
							<div class="input-group input-group round">
								<div class="input-group-prepend">
									<span class="input-group-text">
										<i class="fal fa-dollar-sign"></i>
									</span>
								</div>
								<input id="edit-wish-price" class="form-control" type="text" name="price" placeholder="14.99" />
								<input id="edit-wish-price-orig" type="hidden">
							</div>
							<small id="edit-wish-price-help" class="form-text text-muted">This can be a single amount or a range (e.g. 15-20)</small>
						</div>
					</div>
					<div class="modal-footer">
						<input type="hidden" id="edit-wish-id" name="wishId" /><button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
						<button type="submit" id="edit-wish-button" class="btn btn-primary" disabled>Save changes</button>
					</div>
				</form>
			</div>
		</div>
	</div>
	
	<!-- Delete wish modal -->
	<div class="modal fade" id="delete-wish-modal" tabindex="-1" role="dialog" aria-labelledby="delete-wish-modal-label" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">
				<form action="/wish/delete" method="post">
					<div class="modal-header">
						<h5 class="modal-title" id="delete-wish-modal-label">Confirm delete</h5>
						<button type="button" class="close btn btn-round" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body">
						<p class="lead">Are you sure you want to delete the wish &quot;<span id="delete-wish-description" class="font-weight-bold"></span>&quot;?</p>
					</div>
					<div class="modal-footer">
						<input type="hidden" id="delete-wish-id" name="wishId" />
						<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
						<button type="submit" class="btn btn-danger">Delete wish</button>
					</div>
				</form>
			</div>
		</div>
	</div>

	<script type="text/javascript" th:src="@{/js/custom/wishlist.js}"></script>
</section>
</body>
</html>
